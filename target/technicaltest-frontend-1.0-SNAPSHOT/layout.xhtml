<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>

        <h:outputStylesheet library="webjars" name="primeflex/3.3.1/primeflex.min.css" />
        <title>Esta es una prueba con primefaces</title>
    </h:head>
    <h:body>
        <h:outputScript>
            var a = #{index.toJson()};
        </h:outputScript>
        <script>

            function createPolicy() {

                let vehicles = JSON.stringify(a);
                console.log('me estoy llamando por que me hiciste click', vehicles);
                fetch('http://localhost:8081/policy', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: vehicles
                })
                        .then(response => {
                            if (!response.ok) {
                                throw new Error('Error de red: ' + response.statusText);
                            }
                            return response.json();
                        })
                        .then(data => {
                            console.log(data);
                            // Manejar la respuesta segÃºn sea necesario
                        })
                        .catch(error => {
                            console.error('Error al llamar a la API:', error);
                        });


            }
        </script>
        <h:form>

            <div class="w-full h-full p-3 border-round-sm">

                <div class="grid">
                    <div id="left" class="col-3">
                        <ui:insert name="left"></ui:insert>
                    </div>
                    <div id="content" class="col-9">
                        <ui:insert name="content"></ui:insert>
                    </div>
                </div>
            </div>
        </h:form>
    </h:body>
</html>

